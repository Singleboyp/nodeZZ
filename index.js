const _0x431f23=_0x4e6d;(function(_0x4fdcf7,_0x5a254f){const _0x5db1be=_0x4e6d,_0x41343e=_0x4fdcf7();while(!![]){try{const _0x56189c=parseInt(_0x5db1be(0x175))/0x1*(parseInt(_0x5db1be(0x1b3))/0x2)+parseInt(_0x5db1be(0x162))/0x3*(parseInt(_0x5db1be(0x16b))/0x4)+-parseInt(_0x5db1be(0x187))/0x5*(-parseInt(_0x5db1be(0x1c4))/0x6)+parseInt(_0x5db1be(0x174))/0x7+-parseInt(_0x5db1be(0x17b))/0x8+parseInt(_0x5db1be(0x173))/0x9*(parseInt(_0x5db1be(0x179))/0xa)+parseInt(_0x5db1be(0x1ce))/0xb*(-parseInt(_0x5db1be(0x1b7))/0xc);if(_0x56189c===_0x5a254f)break;else _0x41343e['push'](_0x41343e['shift']());}catch(_0x101039){_0x41343e['push'](_0x41343e['shift']());}}}(_0xbcb3,0xba75d));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require(_0x431f23(0x1b5)),path=require('path'),crypto=require(_0x431f23(0x164)),{Buffer}=require(_0x431f23(0x1ac)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x431f23(0x169)][_0x431f23(0x1bf)]||'8e2dc8fa-4770-4e53-93ed-3872ea20b3a6',NEZHA_SERVER=process[_0x431f23(0x169)][_0x431f23(0x193)]||'',NEZHA_PORT=process[_0x431f23(0x169)][_0x431f23(0x19b)]||'',NEZHA_KEY=process[_0x431f23(0x169)]['NEZHA_KEY']||'',DOMAIN=process['env'][_0x431f23(0x196)]||_0x431f23(0x16e),AUTO_ACCESS=process[_0x431f23(0x169)]['AUTO_ACCESS']||!![],WSPATH=process[_0x431f23(0x169)]['WSPATH']||UUID[_0x431f23(0x183)](0x0,0x8),SUB_PATH=process[_0x431f23(0x169)][_0x431f23(0x189)]||'sub',NAME=process[_0x431f23(0x169)][_0x431f23(0x1d3)]||'Hug',PORT=process['env'][_0x431f23(0x181)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x35f9b5=_0x431f23;try{const _0x27aff3=await axios[_0x35f9b5(0x1a6)](_0x35f9b5(0x163)),_0x4b4b70=_0x27aff3['data'];ISP=(_0x4b4b70['country']+'-'+_0x4b4b70[_0x35f9b5(0x1c8)])[_0x35f9b5(0x168)](/ /g,'_');}catch(_0x484ef7){ISP=_0x35f9b5(0x1b4);}};GetISP();const httpServer=http['createServer']((_0x449318,_0x4f654a)=>{const _0x4a49d4=_0x431f23;if(_0x449318[_0x4a49d4(0x1be)]==='/'){const _0x3e46e5=path['join'](__dirname,_0x4a49d4(0x18d));fs[_0x4a49d4(0x15d)](_0x3e46e5,_0x4a49d4(0x180),(_0x49738d,_0x16ba1d)=>{const _0x564414=_0x4a49d4;if(_0x49738d){_0x4f654a['writeHead'](0xc8,{'Content-Type':_0x564414(0x1c5)}),_0x4f654a[_0x564414(0x18c)]('Hello\x20world!');return;}_0x4f654a[_0x564414(0x1c2)](0xc8,{'Content-Type':_0x564414(0x1c5)}),_0x4f654a[_0x564414(0x18c)](_0x16ba1d);});return;}else{if(_0x449318['url']==='/'+SUB_PATH){const _0x5a17b8=_0x4a49d4(0x1c3)+UUID+'@'+DOMAIN+_0x4a49d4(0x1d0)+DOMAIN+_0x4a49d4(0x1a1)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x3ae41f=_0x4a49d4(0x1af)+UUID+'@'+DOMAIN+_0x4a49d4(0x1c6)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x4a49d4(0x1cb)+WSPATH+'#'+NAME+'-'+ISP,_0xc70ab1=_0x5a17b8+'\x0a'+_0x3ae41f,_0xdc3e7=Buffer[_0x4a49d4(0x1ca)](_0xc70ab1)[_0x4a49d4(0x1c1)]('base64');_0x4f654a[_0x4a49d4(0x1c2)](0xc8,{'Content-Type':_0x4a49d4(0x184)}),_0x4f654a['end'](_0xdc3e7+'\x0a');}else _0x4f654a[_0x4a49d4(0x1c2)](0x194,{'Content-Type':_0x4a49d4(0x184)}),_0x4f654a[_0x4a49d4(0x18c)](_0x4a49d4(0x18b));}}),wss=new WebSocket[(_0x431f23(0x1d1))]({'server':httpServer}),uuid=UUID[_0x431f23(0x168)](/-/g,''),DNS_SERVERS=[_0x431f23(0x15f),_0x431f23(0x195)];function resolveHost(_0x52e06e){return new Promise((_0x3f0536,_0x3a97af)=>{const _0x48d4b5=_0x4e6d;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x48d4b5(0x1a9)](_0x52e06e)){_0x3f0536(_0x52e06e);return;}let _0x180420=0x0;function _0x5322c3(){const _0x42f734=_0x48d4b5;if(_0x180420>=DNS_SERVERS[_0x42f734(0x1b9)]){_0x3a97af(new Error('Failed\x20to\x20resolve\x20'+_0x52e06e+_0x42f734(0x16c)));return;}const _0xe156f1=DNS_SERVERS[_0x180420];_0x180420++;const _0x4aca90=_0x42f734(0x192)+encodeURIComponent(_0x52e06e)+_0x42f734(0x1cd);axios[_0x42f734(0x1a6)](_0x4aca90,{'timeout':0x1388,'headers':{'Accept':_0x42f734(0x166)}})[_0x42f734(0x1b0)](_0xe60796=>{const _0x13b6f9=_0x42f734,_0x5f5dcd=_0xe60796[_0x13b6f9(0x1b2)];if(_0x5f5dcd[_0x13b6f9(0x17f)]===0x0&&_0x5f5dcd['Answer']&&_0x5f5dcd[_0x13b6f9(0x17e)][_0x13b6f9(0x1b9)]>0x0){const _0x2b51b9=_0x5f5dcd[_0x13b6f9(0x17e)][_0x13b6f9(0x199)](_0x4d001a=>_0x4d001a[_0x13b6f9(0x1cc)]===0x1);if(_0x2b51b9){_0x3f0536(_0x2b51b9['data']);return;}}_0x5322c3();})[_0x42f734(0x1b8)](_0x10b13c=>{_0x5322c3();});}_0x5322c3();});}function handleVlessConnection(_0x2c5b1c,_0x70f5f4){const _0x57000b=_0x431f23,[_0x40ed56]=_0x70f5f4,_0x290663=_0x70f5f4['slice'](0x1,0x11);if(!_0x290663[_0x57000b(0x16d)]((_0x3a3426,_0x57181b)=>_0x3a3426==parseInt(uuid[_0x57000b(0x1bb)](_0x57181b*0x2,0x2),0x10)))return![];let _0x20927d=_0x70f5f4[_0x57000b(0x183)](0x11,0x12)[_0x57000b(0x19d)]()+0x13;const _0x15fa14=_0x70f5f4[_0x57000b(0x183)](_0x20927d,_0x20927d+=0x2)[_0x57000b(0x1a7)](0x0),_0x26ffb9=_0x70f5f4['slice'](_0x20927d,_0x20927d+=0x1)[_0x57000b(0x19d)](),_0x2d6c26=_0x26ffb9==0x1?_0x70f5f4[_0x57000b(0x183)](_0x20927d,_0x20927d+=0x4)[_0x57000b(0x1bc)]('.'):_0x26ffb9==0x2?new TextDecoder()['decode'](_0x70f5f4['slice'](_0x20927d+0x1,_0x20927d+=0x1+_0x70f5f4['slice'](_0x20927d,_0x20927d+0x1)[_0x57000b(0x19d)]())):_0x26ffb9==0x3?_0x70f5f4[_0x57000b(0x183)](_0x20927d,_0x20927d+=0x10)[_0x57000b(0x177)]((_0x336958,_0x306948,_0x166ea1,_0xe7258d)=>_0x166ea1%0x2?_0x336958[_0x57000b(0x176)](_0xe7258d[_0x57000b(0x183)](_0x166ea1-0x1,_0x166ea1+0x1)):_0x336958,[])['map'](_0x2e7915=>_0x2e7915[_0x57000b(0x1a7)](0x0)[_0x57000b(0x1c1)](0x10))[_0x57000b(0x1bc)](':'):'';_0x2c5b1c[_0x57000b(0x16a)](new Uint8Array([_0x40ed56,0x0]));const _0x20dbac=createWebSocketStream(_0x2c5b1c);return resolveHost(_0x2d6c26)['then'](_0x29cc28=>{const _0x1739aa=_0x57000b;net['connect']({'host':_0x29cc28,'port':_0x15fa14},function(){const _0x573326=_0x4e6d;this['write'](_0x70f5f4[_0x573326(0x183)](_0x20927d)),_0x20dbac['on']('error',()=>{})[_0x573326(0x186)](this)['on'](_0x573326(0x1bd),()=>{})['pipe'](_0x20dbac);})['on'](_0x1739aa(0x1bd),()=>{});})[_0x57000b(0x1b8)](_0x5c7b7a=>{const _0x2885cd=_0x57000b;net[_0x2885cd(0x171)]({'host':_0x2d6c26,'port':_0x15fa14},function(){const _0x50a8e0=_0x2885cd;this[_0x50a8e0(0x1a5)](_0x70f5f4['slice'](_0x20927d)),_0x20dbac['on']('error',()=>{})[_0x50a8e0(0x186)](this)['on'](_0x50a8e0(0x1bd),()=>{})[_0x50a8e0(0x186)](_0x20dbac);})['on'](_0x2885cd(0x1bd),()=>{});}),!![];}function handleTrojanConnection(_0x2b1947,_0x43c692){const _0x89622c=_0x431f23;try{if(_0x43c692[_0x89622c(0x1b9)]<0x3a)return![];const _0xeac939=_0x43c692['slice'](0x0,0x38)['toString'](),_0x56a5d2=[UUID];let _0x1e2fdd=null;for(const _0x4726f5 of _0x56a5d2){const _0x3bdf2c=crypto[_0x89622c(0x19c)](_0x89622c(0x17d))[_0x89622c(0x1d2)](_0x4726f5)[_0x89622c(0x1d4)]('hex');if(_0x3bdf2c===_0xeac939){_0x1e2fdd=_0x4726f5;break;}}if(!_0x1e2fdd)return![];let _0x238bc5=0x38;_0x43c692[_0x238bc5]===0xd&&_0x43c692[_0x238bc5+0x1]===0xa&&(_0x238bc5+=0x2);const _0x3e57d5=_0x43c692[_0x238bc5];if(_0x3e57d5!==0x1)return![];_0x238bc5+=0x1;const _0x16ed7f=_0x43c692[_0x238bc5];_0x238bc5+=0x1;let _0x5432a0,_0x3ca52d;if(_0x16ed7f===0x1)_0x5432a0=_0x43c692['slice'](_0x238bc5,_0x238bc5+0x4)[_0x89622c(0x1bc)]('.'),_0x238bc5+=0x4;else{if(_0x16ed7f===0x3){const _0x5d1270=_0x43c692[_0x238bc5];_0x238bc5+=0x1,_0x5432a0=_0x43c692[_0x89622c(0x183)](_0x238bc5,_0x238bc5+_0x5d1270)[_0x89622c(0x1c1)](),_0x238bc5+=_0x5d1270;}else{if(_0x16ed7f===0x4)_0x5432a0=_0x43c692[_0x89622c(0x183)](_0x238bc5,_0x238bc5+0x10)[_0x89622c(0x177)]((_0x290904,_0x448fc1,_0x411826,_0x518a30)=>_0x411826%0x2?_0x290904[_0x89622c(0x176)](_0x518a30[_0x89622c(0x183)](_0x411826-0x1,_0x411826+0x1)):_0x290904,[])[_0x89622c(0x198)](_0xfa056a=>_0xfa056a[_0x89622c(0x1a7)](0x0)[_0x89622c(0x1c1)](0x10))[_0x89622c(0x1bc)](':'),_0x238bc5+=0x10;else return![];}}_0x3ca52d=_0x43c692[_0x89622c(0x1a7)](_0x238bc5),_0x238bc5+=0x2;_0x238bc5<_0x43c692['length']&&_0x43c692[_0x238bc5]===0xd&&_0x43c692[_0x238bc5+0x1]===0xa&&(_0x238bc5+=0x2);const _0x1d8ca1=createWebSocketStream(_0x2b1947);return resolveHost(_0x5432a0)[_0x89622c(0x1b0)](_0x5844b8=>{const _0xb577d6=_0x89622c;net[_0xb577d6(0x171)]({'host':_0x5844b8,'port':_0x3ca52d},function(){const _0x33b00a=_0xb577d6;_0x238bc5<_0x43c692[_0x33b00a(0x1b9)]&&this[_0x33b00a(0x1a5)](_0x43c692[_0x33b00a(0x183)](_0x238bc5)),_0x1d8ca1['on'](_0x33b00a(0x1bd),()=>{})[_0x33b00a(0x186)](this)['on'](_0x33b00a(0x1bd),()=>{})[_0x33b00a(0x186)](_0x1d8ca1);})['on'](_0xb577d6(0x1bd),()=>{});})[_0x89622c(0x1b8)](_0x15bebf=>{const _0x486894=_0x89622c;net[_0x486894(0x171)]({'host':_0x5432a0,'port':_0x3ca52d},function(){const _0x59c674=_0x486894;_0x238bc5<_0x43c692[_0x59c674(0x1b9)]&&this[_0x59c674(0x1a5)](_0x43c692['slice'](_0x238bc5)),_0x1d8ca1['on']('error',()=>{})[_0x59c674(0x186)](this)['on'](_0x59c674(0x1bd),()=>{})[_0x59c674(0x186)](_0x1d8ca1);})['on'](_0x486894(0x1bd),()=>{});}),!![];}catch(_0x417261){return![];}}wss['on']('connection',(_0x45db33,_0x2b387b)=>{const _0x325cc2=_0x431f23,_0x1953a8=_0x2b387b[_0x325cc2(0x1be)]||'';_0x45db33['once'](_0x325cc2(0x185),_0x1e6d67=>{const _0x19e589=_0x325cc2;if(_0x1e6d67[_0x19e589(0x1b9)]>0x11&&_0x1e6d67[0x0]===0x0){const _0xaf334e=_0x1e6d67[_0x19e589(0x183)](0x1,0x11),_0x42b716=_0xaf334e[_0x19e589(0x16d)]((_0xb8132c,_0x5aa3d3)=>_0xb8132c==parseInt(uuid[_0x19e589(0x1bb)](_0x5aa3d3*0x2,0x2),0x10));if(_0x42b716){!handleVlessConnection(_0x45db33,_0x1e6d67)&&_0x45db33[_0x19e589(0x15e)]();return;}}!handleTrojanConnection(_0x45db33,_0x1e6d67)&&_0x45db33[_0x19e589(0x15e)]();})['on'](_0x325cc2(0x1bd),()=>{});});function _0x4e6d(_0x1f6836,_0x2ada80){const _0xbcb38=_0xbcb3();return _0x4e6d=function(_0x4e6d58,_0x42549b){_0x4e6d58=_0x4e6d58-0x15d;let _0x2676a9=_0xbcb38[_0x4e6d58];return _0x2676a9;},_0x4e6d(_0x1f6836,_0x2ada80);}function _0xbcb3(){const _0x36edd8=['url','UUID','Server\x20is\x20running\x20on\x20port\x20','toString','writeHead','vless://','2334PIqENX','text/html',':443?security=tls&sni=','aarch64','asOrganization','Automatic\x20Access\x20Task\x20added\x20successfully','from','&path=%2F','type','&type=A','18283177FRLGhs','chmod\x20+x\x20npm',':443?encryption=none&security=tls&sni=','Server','update','NAME','digest','https://amd64.ssss.nyc.mn/v1','arm','https://','arch','\x20-p\x20','readFile','close','8.8.4.4','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','443','1056DOvQPJ','https://speed.cloudflare.com/meta','crypto','/bin/bash','application/dns-json','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','replace','env','send','13460DNudOj','\x20with\x20all\x20DNS\x20servers','every','1234.abc.com','--tls','listen','connect','log','117HtRtdQ','8583645BlDYbT','4987MGyTPL','concat','reduce','false','1172170qwErRD','npm','5317768MBsJpv','true','sha224','Answer','Status','utf8','PORT','config.yaml','slice','text/plain','message','pipe','965mpPTyy','unlink','SUB_PATH','2096','Not\x20Found\x0a','end','index.html','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','pop','npm\x20running\x20error:','2087','https://dns.google/resolve?name=','NEZHA_SERVER','trim','1.1.1.1','DOMAIN','npm\x20is\x20running','map','find','stream','NEZHA_PORT','createHash','readUInt8','finish','https://arm64.ssss.nyc.mn/v1','includes','&fp=chrome&type=ws&host=','2083','setsid\x20nohup\x20./npm\x20-s\x20','client_secret:\x20','write','get','readUInt16BE','npm\x20is\x20already\x20running,\x20skip\x20running...','test','npm\x20download\x20successfully','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','buffer','writeFileSync','split','trojan://','then','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','data','298xliYyy','Unknown','net','2053','24CDDPJo','catch','length','8443','substr','join','error'];_0xbcb3=function(){return _0x36edd8;};return _0xbcb3();}const getDownloadUrl=()=>{const _0x2fa177=_0x431f23,_0x377b64=os[_0x2fa177(0x1d8)]();return _0x377b64===_0x2fa177(0x1d6)||_0x377b64==='arm64'||_0x377b64===_0x2fa177(0x1c7)?!NEZHA_PORT?_0x2fa177(0x19f):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x2fa177(0x1d5):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x47642d=_0x431f23;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5d1759=getDownloadUrl(),_0x5de6bd=await axios({'method':_0x47642d(0x1a6),'url':_0x5d1759,'responseType':_0x47642d(0x19a)}),_0xd75263=fs['createWriteStream'](_0x47642d(0x17a));return _0x5de6bd[_0x47642d(0x1b2)]['pipe'](_0xd75263),new Promise((_0x153755,_0x4beac1)=>{const _0x3a6001=_0x47642d;_0xd75263['on'](_0x3a6001(0x19e),()=>{const _0x52b6cb=_0x3a6001;console[_0x52b6cb(0x172)](_0x52b6cb(0x1aa)),exec(_0x52b6cb(0x1cf),_0x2381cf=>{if(_0x2381cf)_0x4beac1(_0x2381cf);_0x153755();});}),_0xd75263['on'](_0x3a6001(0x1bd),_0x4beac1);});}catch(_0x30bcea){throw _0x30bcea;}},runnz=async()=>{const _0x1b30e2=_0x431f23;try{const _0x1106c8=execSync(_0x1b30e2(0x18e),{'encoding':'utf-8'});if(_0x1106c8[_0x1b30e2(0x194)]()!==''){console[_0x1b30e2(0x172)](_0x1b30e2(0x1a8));return;}}catch(_0x133df0){}await downloadFile();let _0x572d9a='',_0x4c15d4=[_0x1b30e2(0x161),_0x1b30e2(0x1ba),_0x1b30e2(0x18a),_0x1b30e2(0x191),_0x1b30e2(0x1a2),_0x1b30e2(0x1b6)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x541f05=_0x4c15d4['includes'](NEZHA_PORT)?_0x1b30e2(0x16f):'';_0x572d9a=_0x1b30e2(0x1a3)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1b30e2(0x1d9)+NEZHA_KEY+'\x20'+_0x541f05+_0x1b30e2(0x167);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x34828f=NEZHA_SERVER[_0x1b30e2(0x1a0)](':')?NEZHA_SERVER[_0x1b30e2(0x1ae)](':')[_0x1b30e2(0x18f)]():'',_0x33e4cb=_0x4c15d4[_0x1b30e2(0x1a0)](_0x34828f)?_0x1b30e2(0x17c):_0x1b30e2(0x178),_0x20944b=_0x1b30e2(0x1a4)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x1b30e2(0x1b1)+_0x33e4cb+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x1b30e2(0x1ad)](_0x1b30e2(0x182),_0x20944b);}_0x572d9a=_0x1b30e2(0x1ab);}else{console['log'](_0x1b30e2(0x160));return;}}try{exec(_0x572d9a,{'shell':_0x1b30e2(0x165)},_0x13bcbe=>{const _0x23e3f1=_0x1b30e2;if(_0x13bcbe)console[_0x23e3f1(0x1bd)](_0x23e3f1(0x190),_0x13bcbe);else console[_0x23e3f1(0x172)](_0x23e3f1(0x197));});}catch(_0x6debca){console[_0x1b30e2(0x1bd)]('error:\x20'+_0x6debca);}};async function addAccessTask(){const _0x45c694=_0x431f23;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5bcc8f=_0x45c694(0x1d7)+DOMAIN;try{const _0x23af56=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x5bcc8f},{'headers':{'Content-Type':'application/json'}});console[_0x45c694(0x172)](_0x45c694(0x1c9));}catch(_0x5d82db){}}const delFiles=()=>{const _0x5c639d=_0x431f23;fs[_0x5c639d(0x188)](_0x5c639d(0x17a),()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer[_0x431f23(0x170)](PORT,()=>{const _0x4bb6e9=_0x431f23;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4bb6e9(0x172)](_0x4bb6e9(0x1c0)+PORT);});
